<div container>
  <div content>
    <form [formGroup]="form">
      <div class="cliente-container">
        <div class="cliente-info">
          <h1>Editar Cliente</h1>
          <div class="cliente-info-conteiner">
            <div class="cliente-info-content">
              <img [src]="cliente.foto" alt="Foto Perfil">

              <div>
                <mat-form-field>
                  <mat-label>Inscrição</mat-label>
                  <input matInput formControlName="inscricao">
                  <mat-error *ngIf="form.controls['inscricao'].hasError('required')">
                    Inscrição obrigatório
                  </mat-error>
                </mat-form-field>

                <mat-form-field>
                  <mat-label>Nome</mat-label>
                  <input matInput formControlName="nome">
                  <mat-error *ngIf="form.controls['nome'].hasError('required')">
                    Nome obrigatório
                  </mat-error>
                </mat-form-field>

                <mat-form-field>
                  <mat-label>Apelido</mat-label>
                  <input matInput formControlName="apelido">
                  <mat-error *ngIf="form.controls['apelido'].hasError('required')">
                    Apelido obrigatório
                  </mat-error>
                </mat-form-field>

                <mat-form-field>
                  <mat-label>Status</mat-label>
                  <input matInput readonly formControlName="status">
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>

        <div class="email-container">
          <h1>Emails</h1>
          <table mat-table [dataSource]="emailDataSource">

            <ng-container matColumnDef="categoria">
              <th mat-header-cell *matHeaderCellDef>Categoria</th>
              <td mat-cell *matCellDef="let element">
                {{ element.categoria }}
              </td>

              <td mat-footer-cell *matFooterCellDef>
                <mat-form-field>
                  <input matInput placeholder="Categoria" [formControl]="categoriaFormControl" />
                  <mat-error *ngIf="categoriaFormControl.hasError('required')">
                    Categoria obrigatória
                  </mat-error>
                </mat-form-field>
              </td>
            </ng-container>

            <ng-container matColumnDef="nome">
              <th mat-header-cell *matHeaderCellDef>Nome</th>
              <td mat-cell *matCellDef="let element">
                {{ element.nome }}
              </td>

              <td mat-footer-cell *matFooterCellDef>
                <mat-form-field>
                  <input matInput placeholder="Nome" [formControl]="nomeFormControl" />
                  <mat-error *ngIf="nomeFormControl.hasError('required')">
                    Nome obrigatório
                  </mat-error>
                </mat-form-field>
              </td>
            </ng-container>

            <ng-container matColumnDef="email">
              <th mat-header-cell *matHeaderCellDef>Email</th>
              <td mat-cell *matCellDef="let element">
                {{ element.email }}
              </td>

              <td mat-footer-cell *matFooterCellDef>
                <mat-form-field>
                  <input type="email" matInput placeholder="Email" [formControl]="emailFormControl"
                    [errorStateMatcher]="matcher" />
                  <mat-error *ngIf="emailFormControl.hasError('email') && !emailFormControl.hasError('required')">
                    Digite um email válido
                  </mat-error>
                  <mat-error *ngIf="emailFormControl.hasError('required')">
                    Email obrigatório
                  </mat-error>
                </mat-form-field>
              </td>
            </ng-container>

            <ng-container matColumnDef="acao">
              <th mat-header-cell *matHeaderCellDef>Acao</th>
              <td mat-cell *matCellDef="let element">
                <button mat-mini-fab color="warn" (click)="removeEmail(element.id)">
                  <mat-icon>delete</mat-icon>
                </button>
              </td>
              <td mat-footer-cell *matFooterCellDef>
                <button mat-mini-fab color="primary" (click)="addEmail()">
                  <mat-icon>plus_one</mat-icon>
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
          </table>
        </div>
      </div>

      <div class="btn-container">
        <button mat-flat-button color="primary" class="btn-salvar" (click)="updateCliente()">Salvar</button>
        <button mat-flat-button color="warn" class="btn-excluir" (click)="deleteCliente()">Excluir</button>
        <button mat-flat-button color="warn" class="btn-voltar" [routerLink]="'/clientes'">Voltar</button>
      </div>
    </form>
  </div>
</div>
